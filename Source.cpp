#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <stdlib.h>
#include<iostream>
#include<string>
#include<Windows.h>
#include <math.h>
using namespace std;


struct struck_ochered
{
	char data[256];  // полезная информация
	struct struck_ochered* next; // ссылка на следующий элемент 
};

struct struck_ochered* head_ochered = NULL, * last_ochered = NULL;
int dlinna_ochered_stek = 0;

struct struck_ochered* get_ochered(void)
{
	struct struck_ochered* p = NULL;
	char s[256];
	if ((p = (struck_ochered*)malloc(sizeof(struct struck_ochered))) == NULL)  // выделяем память под новый элемент списка
	{
		printf("Ошибка при распределении памяти\n");
		exit(1);
	}

	printf("Введите название объекта: \n");   // вводим данные
	scanf("%s", &s);
	if (s == 0)
	{
		printf("Запись не была произведена\n");
		return NULL;
	}
	strcpy(p->data, s);


	p->next = NULL;

	return p;		// возвращаем указатель на созданный элемент
}

void  review_stek(int razmer)
{
	struct struck_ochered* head_struc = head_ochered, * last_struc = head_ochered;
	if (head_ochered == NULL)
	{
		printf("Список пуст\n");
	}
	for (int i = 0; i < razmer; i++) {
		head_struc = head_ochered;
		printf("Имя - %s \n", head_ochered->data);
		head_ochered = head_ochered->next;
		delete head_struc;
	}
	return;
}




void ochered_stek(void) {
	struct struck_ochered* q, * f = NULL;
	q = get_ochered();
	if (head_ochered == NULL) {
		head_ochered = q;
		last_ochered = q;
	}
	else {
		q->next = head_ochered;
		head_ochered = q;
	}
}

void review_ochered(int razmer)
{
	struct struck_ochered* head_struc = head_ochered, * last_struc = last_ochered;
	if (head_ochered == NULL)
	{
		printf("Список пуст\n");
	}
	for (int i = 0; i < razmer; i++) {

		printf("Имя - %s \n", last_struc->data);
		if (head_struc != last_struc) {
			while (head_struc->next != last_struc) {
				head_struc = head_struc->next;
			}
			delete last_struc;
			last_struc = head_struc;
			head_struc = head_ochered;
		}

	}
	last_ochered = last_struc;

	return;

}



int main() {
	setlocale(LC_ALL, "Rus");

	int colvo_elem, vibor, vibor1 = 0, vibor2 = 0;

	printf("1. Список с приоритетом \n2. Очередь \n3. Стек\n");
	printf("Выберите действие: ");
	scanf("%d", &vibor);

	// Обработка выбора пользователя
	switch (vibor) {
	case 1:
		cout << "Пусто\n";
		break;
	case 2:
		cout << "Пусто\n";
		break;
	case 3:
		while (vibor1 >= 0) {
			printf("1. Добавить элемент \n2. Вывести и удалить элемент\n3. Закончить программу\n");
			printf("Выберите действие: ");
			scanf("%d", &vibor1);
			while (dlinna_ochered_stek == 0 && vibor1 == 2)
			{
				cout << "Список пуст! Удалять нечего\n1. Добавить элемент \n3. Закончить программу\nВыберите действие: ";
				cin >> vibor1;
			}
			switch (vibor1) {
			case 1:
				cout << "Сколько элементов вы хотите добавить: ";
				cin >> colvo_elem;
				while (colvo_elem <= 0)
				{
					cout << "Список не может существовать\n Попробуйте ещё раз: ";
					cin >> colvo_elem;
				}
				dlinna_ochered_stek += colvo_elem;
				for (int i = 0; i < colvo_elem;i++) {
					ochered_stek();
				}
				break;
			case 2:
				cout << "Сколько элементов вы хотите вывести на экран и удалить: ";
				cin >> colvo_elem;
				while (colvo_elem > dlinna_ochered_stek)
				{
					cout << "В очереди нет столько элементов.\n Попробуйте ещё раз : ";
					cin >> colvo_elem;
				}
				dlinna_ochered_stek -= colvo_elem;
				review_stek(colvo_elem);

				break;
			case 3:
				vibor1 = -1;
				break;
			default:
				printf("Ошибка. Попробуйте снова.\n");
			}
		}

		break;
	default:
		printf("Ошибка. Попробуйте снова.\n");
	}

}





